name: BuildDocker
on: [push]
jobs:
  Build-Image-Specific-Container:
    runs-on: ["self-hosted", "linux", "stroppy"]
    steps:
      - uses: actions/checkout@v2
      - name: install dependencies
        working-directory: third_party/stroppy-test-cartridge
        run: ./deps.sh
      - name: build cartridge application
        working-directory: third_party/stroppy-test-cartridge
        run: cartridge build
      - name: build docker image
        working-directory: third_party/stroppy-test-cartridge
        run: cartridge pack docker
